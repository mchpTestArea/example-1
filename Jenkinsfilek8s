pipeline {
    agent {
        kubernetes {
           label 'relative'
			defaultContainer 'xc8-mplabx'
            yamlFile 'cloudprovider.yml'
       }
    }
    parameters {
        string( name: 'NOTIFICATION_EMAIL',
                defaultValue: 'dinesh.baria@microchip.com',
                description: "Email to send build failure and fixed notifications.")
    }
	
	options {
		timestamps()
	}

	stages {
		stage('setup') {
		    steps {
				script {				
					def buildPipeline = load ('buildpipeline.groovy')
					buildPipeline.runStages()
				}
            }
		}
		/*
        stage('Checkout') {
            steps {
				checkout scm
            }
        }
		*/
		/*
		stage('base') {
			steps {
				script {
					def job = build job: "User Repositories/Dinesh Baria/base/master", 
						parameters: [
							string(name: 'REPO_NAME', value: "relative"),
							string(name: 'BRANCH_NAME', value: "${env.BRANCH_NAME}")
						],
						propagate:true, wait: true
				}
			}
		}
		*/
	}
}	
