pipeline {
    agent {
        kubernetes {
           label 'relative'
			defaultContainer 'xc8-mplabx'
            yamlFile 'cloudprovider.yml'
       }
    }
    parameters {
        string( name: 'NOTIFICATION_EMAIL',
                defaultValue: 'dinesh.baria@microchip.com',
                description: "Email to send build failure and fixed notifications.")
    }
	
	environment {
		GITHUB_OWNER = 'microchip-pic-avr-examples'	
		GITHUB_URL ='https://github.com/microchip-pic-avr-examples/[ADD_REPO_NAME_HERE]'
		BITBUCKET_URL = 'https://bitbucket.microchip.com/scm/ebe/[ADD_REPO_NAME_HERE].git'
		SEMVER_REGEX = '^(0|[1-9]\\d*)+\\.(0|[1-9]\\d*)+\\.(0|[1-9]\\d*)+$'
		ARTIFACTORY_SERVER = 'https://artifacts.microchip.com:7999/artifactory'
		EMILLIST = createEmailList()
	}	
	options {
		timestamps()
	}

	stages {
		stage('setup') {
		    steps {
				script {				
					def buildPipeline = load ('buildpipeline.groovy')
					buildPipeline.runStages()
				}
            }
		}
		/*
        stage('Checkout') {
            steps {
				checkout scm
            }
        }
		*/
		/*
		stage('base') {
			steps {
				script {
					def job = build job: "User Repositories/Dinesh Baria/base/master", 
						parameters: [
							string(name: 'REPO_NAME', value: "relative"),
							string(name: 'BRANCH_NAME', value: "${env.BRANCH_NAME}")
						],
						propagate:true, wait: true
				}
			}
		}
		*/
	}
}	
